{
  "version": "1.9.1", 
  "nickname": "UFactorResult", 
  "outputs": [
    [
      {
        "access": "None", 
        "name": "tags", 
        "description": "The names of each of the U-Factor tags in the THMZ file.", 
        "type": null, 
        "default": null
      }, 
      {
        "access": "None", 
        "name": "u_factors", 
        "description": "The U-Factors accross each boundary that was labeled with a U-Factor tag.\nThis will be in W/m2-K by default unless ip_ is set to True in which\ncase it will be in Btu/h-ft2-F.", 
        "type": null, 
        "default": null
      }, 
      {
        "access": "None", 
        "name": "lengths", 
        "description": "The proejcted lengths of each boundary that was labeled with a U-Factor tag.\nThis will be the total length of the boundary if the default u_type\nof \"Total\" has been used and will account for the length only in the\nprojection plane if a different u_type is used. Values are in mm by\ndefault unless ip_ is set to True, in which case it will be in inches.", 
        "type": null, 
        "default": null
      }
    ]
  ], 
  "inputs": [
    {
      "access": "item", 
      "name": "_thmz", 
      "description": "Path to a THMZ file that has been simulated in THERM. This can be the\ndirect output of the \"FF Model to THMZ\" component as long as\nrun_ has been set to True.", 
      "type": "string", 
      "default": null
    }, 
    {
      "access": "item", 
      "name": "_u_type_", 
      "description": "Optional text or an integer to set the type of U-Factor to import from\nthe THMZ file if something other than the U-Factor along the total\nboundary length is desired. Choose from the following options. (Default: Total)\n0 - Total\n1 - Projected X\n2 - Projected Y\n3 - Projected in Glass Plane\n4 - Custom Rotation", 
      "type": "string", 
      "default": null
    }, 
    {
      "access": "item", 
      "name": "ip_", 
      "description": "Set to True to have all data imported with IP Units (Btu/h-ft2-F and in)\ninstead of the default SI units of W/m2-K and mm.", 
      "type": "bool", 
      "default": null
    }
  ], 
  "subcategory": "1 :: THERM", 
  "code": "\ntry:  # import the core fairyfly dependencies\n    from fairyfly_therm.result import THMZResult\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import fairyfly:\\n\\t{}'.format(e))\n\n\ntry:  # import the core ladybug dependencies\n    from ladybug.datatype.uvalue import UValue\n    from ladybug.datatype.distance import Distance\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import ladybug:\\n\\t{}'.format(e))\n\ntry:  # import the ladybug_{{cad}} dependencies\n    from ladybug_{{cad}}.config import conversion_to_meters\n    from ladybug_{{cad}}.fromgeometry import from_mesh3d, from_point3d\n    from ladybug_{{cad}}.fromobjects import legend_objects\n    from ladybug_{{cad}}.text import text_objects\n    from ladybug_{{cad}}.{{plugin}} import all_required_inputs, give_warning\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import ladybug_{{cad}}:\\n\\t{}'.format(e))\n\nU_TYPES = {\n    'total': 'total',\n    '0': 'total',\n    'projected x': 'projected_x',\n    '1': 'projected_x',\n    'projected y': 'projected_y',\n    '2': 'projected_y',\n    'projected in glass plane': 'projected_in_glass_plane',\n    '3': 'projected_in_glass_plane',\n    'custom rotation': 'custom_rotation',\n    '4': 'custom_rotation'\n}\n\n\nif all_required_inputs(ghenv.Component):\n    # create the THMZResult object and check to be sure that it has been simulated\n    result_obj = THMZResult(_thmz)\n    uf_objs = result_obj.u_factors\n    if uf_objs is None:\n        msg = 'No U-Factor data was found within the THMZ file.\\nMake sure that the THMZ ' \\\n            'file has been successfully simulated in THERM.'\n        print(msg)\n        give_warning(ghenv.Component, msg)\n\n    elif len(uf_objs) == 0:\n        msg = 'U-Factor tags were not assigned to any boundaries.\\nMake sure that ' \\\n            'a u_factor_tag_ has been input to one of the \"FF Boundary\" components.'\n        print(msg)\n        give_warning(ghenv.Component, msg)\n\n    else:\n        # figure out the right attributes to get from the UFactor objects\n        if _u_type_ is None:\n            b_attr = 'total'\n        else:\n            b_attr = U_TYPES[_u_type_.lower()]\n        u_attr = '{}_u_factor'.format(b_attr)\n        l_attr = '{}_length'.format(b_attr)\n        \n        # extract all of the U-Factor information\n        tags, u_factors, lengths = [], [], []\n        for uf_obj in uf_objs:\n            tags.append(uf_obj.name)\n            u_factors.append(getattr(uf_obj, u_attr))\n            lengths.append(getattr(uf_obj, l_attr))\n\n        # if IP units are requested, convert them\n        if ip_:\n            u_factors_ip = []\n            for uf in u_factors:\n                if uf is not None:\n                    uf = UValue().to_ip([uf], 'W/m2-K')[0][0]\n                u_factors_ip.append(uf)\n            u_factors = u_factors_ip\n            lengths = Distance().to_ip(lengths, 'mm')[0]\n            print(lengths)\n", 
  "category": "Fairyfly", 
  "name": "FF Read UFactor Result", 
  "description": "Create Fairyfly Boundary.\n-"
}