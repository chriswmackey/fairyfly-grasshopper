{
  "version": "1.10.0", 
  "nickname": "LoadObjects", 
  "outputs": [
    [
      {
        "access": "None", 
        "name": "ff_objs", 
        "description": "A list of fairyfly objects that have been re-serialized from\nthe input file.", 
        "type": null, 
        "default": null
      }
    ]
  ], 
  "inputs": [
    {
      "access": "item", 
      "name": "_ff_file", 
      "description": "A file path to a fairyfly JSON from which objects will be loaded\nback into Grasshopper. The objects in the file must be non-abridged\nin order to be loaded back correctly.", 
      "type": "string", 
      "default": null
    }, 
    {
      "access": "item", 
      "name": "_load", 
      "description": "Set to \"True\" to load the objects from the _ff_file.", 
      "type": "bool", 
      "default": null
    }
  ], 
  "subcategory": "0 :: Create", 
  "code": "\nimport io\n\ntry:  # import the core fairyfly dependencies\n    import fairyfly.dictutil as ff_dict_util\n    from fairyfly.model import Model\n    from fairyfly.config import folders\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import fairyfly:\\n\\t{}'.format(e))\n\ntry:  # import the core fairyfly_energy dependencies\n    import fairyfly_therm.material.dictutil as therm_dict_util\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import fairyfly_energy:\\n\\t{}'.format(e))\n\ntry:  # import the core ladybug_{{cad}} dependencies\n    from ladybug_{{cad}}.{{plugin}} import all_required_inputs, give_warning\n    from ladybug_{{cad}}.config import units_system, current_tolerance\nexcept ImportError as e:\n    raise ImportError('\\nFailed to import ladybug_{{cad}}:\\n\\t{}'.format(e))\n\nimport json\n\n\ndef model_units_tolerance_check(model):\n    \"\"\"Convert a model to the current {{Cad}} units and check the tolerance.\n\n    Args:\n        model: A fairyfly Model, which will have its units checked.\n    \"\"\"\n    # check the model units\n    if model.units != units_system():\n        print('Imported model units \"{}\" do not match that of the current {{Cad}} '\n            'model units \"{}\"\\nThe model is being automatically converted '\n            'to the {{Cad}} doc units.'.format(model.units, units_system()))\n        model.convert_to_units(units_system())\n\n    # check that the model tolerance is not too far from the {{Cad}} tolerance\n    if model.tolerance / current_tolerance() >= 100:\n        msg = 'Imported Model tolerance \"{}\" is significantly coarser than the ' \\\n            'current {{Cad}} model tolerance \"{}\".\\nIt is recommended that the ' \\\n            '{{Cad}} document tolerance be changed to be coarser and this ' \\\n            'component is re-run.'.format(model.tolerance, current_tolerance())\n        print msg\n        give_warning(ghenv.Component, msg)\n\n\nif all_required_inputs(ghenv.Component) and _load:\n    with io.open(_ff_file, encoding='utf-8') as inf:\n        first_char = inf.read(1)\n        second_char = inf.read(1)\n    with io.open(_ff_file, encoding='utf-8') as inf:\n        if second_char == '{':\n            inf.read(1)\n        data = json.load(inf)\n\n    if 'type' in data:\n        ff_objs = ff_dict_util.dict_to_object(data, False)  # re-serialize as a core object\n        if ff_objs is None:  # try to re-serialize it as an energy object\n            ff_objs = therm_dict_util.dict_to_object(data, False)\n        elif isinstance(ff_objs, Model):\n            model_units_tolerance_check(ff_objs)\n    else:  # no 'type' key; assume that its a group of objects\n        ff_objs = []\n        for hb_dict in data.values():\n            ff_obj = ff_dict_util.dict_to_object(hb_dict, False)  # re-serialize as a core object\n            if ff_obj is None:  # try to re-serialize it as an energy object\n                ff_obj = therm_dict_util.dict_to_object(hb_dict, False)\n            ff_objs.append(ff_obj)", 
  "category": "Fairyfly", 
  "name": "FF Load Objects", 
  "description": "Load any fairyfly object from a fairyfly JSON file\n-\nFairyfly objects include any Model, Shape, or Boundary.\n-\nIt also includes any fairyfly Material or Simulation object.\n-"
}